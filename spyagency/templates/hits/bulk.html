{% extends 'base/base.html' %}  {% load static %} {% block extra_stylesheet %}
<link
  href="{% static 'plugins/datatables.net-bs4/css/dataTables.bootstrap4.min.css' %}"
  rel="stylesheet"
/>
<link
  href="{% static 'plugins/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css' %}"
  rel="stylesheet"
/>
{% endblock extra_stylesheet %} {% block container %}

<!-- begin row -->
<div class="row">
  <!-- begin col-12 -->
  <div class="col-xl-12">
    <!-- begin panel -->

    <div class="panel panel-inverse">
      <!-- begin panel-heading -->
      <div class="panel-heading">
        <h4 class="panel-title"></h4>
        <div class="panel-heading-btn">
          <a
            href="javascript:;"
            id="create_hits_button"
            title="Nuevo Hit"
            class="btn btn-xs btn-icon btn-primary hide"
          >
            <i class="fa fa-plus"></i>
          </a>
          <a
            href="javascript:;"
            onclick="return updateDatatable();"
            title="Refrescar la tabla de Hit's"
            class="btn btn-xs btn-icon btn-default"
            data-click="panel-reload"
            ><i class="fa fa-redo"></i
          ></a>
          <a
            href="javascript:;"
            class="btn btn-xs btn-icon btn-warning"
            data-click="panel-collapse"
            ><i class="fa fa-minus"></i
          ></a>
        </div>
      </div>
      <!-- end panel-heading -->
      <!-- begin alert -->
      <!-- <div class="alert alert-secondary fade show">
				<button type="button" class="close" data-dismiss="alert">
					<span aria-hidden="true">&times;</span>
				</button>
				In the modern world of responsive web design tables can often cause a particular problem for designers
				due to their row based layout. Responsive is an extension for DataTables that resolves that problem by
				optimising the table's layout for different screen sizes through the dynamic insertion and removal of
				columns from the table.
			</div> -->
      <!-- end alert -->
      <!-- begin panel-body -->
      <div class="panel-body">
        <table
          id="hits_dt"
          class="table table-striped table-bordered table-td-valign-middle"
          style="width: 100%"
        >
          <thead>
            <tr>
              <th width="1%">ID</th>
              <th>CÃ³digo</th>
              <th class="text-nowrap">Asesino</th>
              <th class="text-nowrap">Objetivo</th>
              <th class="text-nowrap">Status</th>
              <th class="text-nowrap">Nivel</th>
              <th class="text-nowrap">Asignado por</th>
              <th class="text-nowrap">Acciones</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <!-- end panel-body -->
    </div>
    <!-- end panel -->
  </div>
  <!-- end col-12 -->
  <div></div>
</div>
<!-- end row -->
{% endblock container %} {% block extra_javascript %}
<script src="{% static 'plugins/datatables.net/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'plugins/datatables.net-bs4/js/dataTables.bootstrap4.min.js' %}"></script>
<script src="{% static 'plugins/datatables.net-responsive/js/dataTables.responsive.min.js' %}"></script>
<script src="{% static 'plugins/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js' %}"></script>
<script src="{% static 'js/demo/table-manage-responsive.demo.js' %}"></script>

<script>
  let dt = $("#hits_dt").DataTable({
    ajax: {
      url: "/hits/api/vi/hits/bulk/",
      headers: { Authorization: "jwt " + HDD.get(Django.name_jwt) },
      dataSrc: function (response) {
        return response.results;
      },
    },
    initComplete: function (settings, response) {

      html = `${response.title}<small class="subtitle"> ${response.subtitle}</small>`;
      $("#page-header").empty().html(html);

      create_url = response.create_url;
      if (create_url !== null) {
        $("#create_hits_button").removeClass("hide").attr("href", create_url);
      }
    },
    columns: [
      { data: "id" },
      { data: "code_hit" },
      { data: "hitmen" },
      { data: "target" },
      { data: "status", "className": "text-center" },
      { data: "level", "className": "text-center" },
      { data: "assigned_by" },
      { data: "buttons_bulk", "className": "text-center" },
    ],
    responsive: true,
    destroy: true,
  });

  // $(document).on('click', '[data-click="panel-lateral"]', function(e) {
  // 	console.log(e)
  // });
</script>

{% endblock extra_javascript %}
